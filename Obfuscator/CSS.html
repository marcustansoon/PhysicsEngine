<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Quattrocento+Sans" />
<html>
  <head>
    <title>Page Title</title>
    <style>
    * {
      font-family: Quattrocento Sans; 
    }
      .container {
        position: absolute;
        top: 30%;
        left: 50%;
        width: 80%;
        height: 70%;
        transform: translate(-50%, -40%);
        border: 0px solid;
      }

      textarea {
        float: left;
        position: relative;
        width: 48%;
        height: 100%;
        border: 1px solid;
      }
      .selectorRenaming{
      	position:absolute;
        width:50%;
        left:50%;
        top:82%;
        transform: translate(-50%, -50%);
      }

    </style>

  </head>

  <body>
    <div class="container">
      <textarea id="inputTextarea">
	* {
    padding: 0px;
    margin: 0px;
  }

  body {
    overflow: hidden;
    font-family: Quattrocento Sans; 
  }

  .image {
    width: 5vw;
    min-width: 40px;
    max-width: 70px;
    -webkit-filter: blur(30px);
    -webkit-animation: image_blur 1.75s ease-in-out forwards, move 1s forwards, hideElement 0.75s forwards;
    animation: image_blur 1.75s ease-in-out forwards, move 1s forwards, hideElement 0.75s forwards;
    -webkit-animation-delay: 0s, 1.75s, 3.5s;
  }

  .imageContainer {
    -webkit-animation: move 1s forwards;
    animation: move 1s forwards;
    -webkit-animation-delay: 1.75s;
    animation-delay: 1.75s;
  }

  .text {
    text-align: center;
    font-size: calc(5px + 0.7vw);
    position: relative;
    top: 45%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
    -webkit-animation: textMove 1s forwards, hideElement 0.75s forwards;
    animation: textMove 1s forwards, hideElement 0.75s forwards;
    -webkit-animation-delay: 1.75s, 3.75s;
    animation-delay: 1.75s, 3.75s;
  }

  @-webkit-keyframes image_blur {
    0% {
      -webkit-filter: blur(25px);
      -webkit-transform: scale(0) rotate(-180deg);
    }

    50% {
      -webkit-filter: blur(8px);
    }

    80% {
      -webkit-filter: blur(0px);
      -webkit-transform: scale(5) rotate(360deg);
    }

    100% {
      -webkit-filter: blur(0px);
      -webkit-transform: scale(4) rotate(360deg);
    }
  }

  @keyframes image_blur {
    0% {
      -webkit-filter: blur(25px);
      -webkit-transform: scale(0) rotate(-180deg);
    }

    50% {
      -webkit-filter: blur(8px);
    }

    80% {
      -webkit-filter: blur(0px);
      -webkit-transform: scale(5) rotate(360deg);
    }

    100% {
      -webkit-filter: blur(0px);
      -webkit-transform: scale(4) rotate(360deg);
    }
  }

  @-webkit-keyframes move {
    100% {
      top: 38%;
    }
  }

  @keyframes move {
    100% {
      top: 38%;
    }
  }

  @-webkit-keyframes textMove {
    100% {
      top: 59%;
      opacity: 1;
      font-size: calc(14px + 0.45vw);
      padding-top: 0.9vw;
    }
  }

  @keyframes textMove {
    100% {
      top: 59%;
      opacity: 1;
      font-size: calc(14px + 0.45vw);
      padding-top: 0.9vw;
    }
  }

  .backgroundCoverUp {
    position: absolute;
    width: 100%;
    height: 100%;
    --pos: 100%;
    background: radial-gradient(circle, rgba(255, 0, 0, 0) 1%, rgba(255, 0, 0, 0) var(--pos), rgba(252, 252, 252, 1) 0.1%);
    animation: a 0s infinite;
    -webkit-animation: circularZoomOut 0.75s ease-in-out forwards, hideElement 1s forwards;
    animation: circularZoomOut 0.75s ease-in-out forwards, hideElement 1s forwards;
    -webkit-animation-delay: 3s, 4s;
    animation-delay: 3s, 4s;
  }

  @-webkit-keyframes circularZoomOut {
    0% {
      --pos: 100%;
    }

    100% {
      --pos: 1%;
    }
  }

  @keyframes circularZoomOut {
    0% {
      --pos: 100%;
    }

    100% {
      --pos: 1%;
    }
  }

  @-webkit-keyframes hideElement {
    100% {
      opacity: 0;

    }
  }

  @keyframes hideElement {
    100% {
      opacity: 0;
    }
  }
</textarea>
      <textarea id="outputTextarea"></textarea>
    </div>
    
    <div id="selectorRenaming" class="selectorRenaming"><b>CSS Selector Renaming</b><br>
    <button onclick="selectorRenaming();">Replace</button>
    </div>
    
    <script>
    
    function shuffle(a) {
        for (let i = a.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
    }
    function getStringInBetween(string,text1,text2){
		let l=string.indexOf(text1),
        z=string.indexOf(text2);  
        return l===-1||z===-1||l>z?undefined:string.substring(l+text1.length,z); 
    }
    
    
    
    
      let str = document.getElementById("inputTextarea").value.replace(/(\r\n|\n|\r)/gm, "").replace(/ +/g, " "); //remove newline,tabs, multiple spaces

      let start, expectingClosingBracket = 0,
        arr = [];

      //get indexes for each '{'
      for (let temp = 0; temp < str.length; temp++) {
        if (str[temp] === '{') {
          expectingClosingBracket++;
        } else if (str[temp] === '}') {
          expectingClosingBracket--;
          if (!expectingClosingBracket) arr.push(temp + 1);
        }
      }

      //console.log(arr);

      let arr2 = [];
      //from the indexes, split individually into elements
      arr2.push(str.substring(0, arr[0]));
      for (let temp = 0; temp < arr.length - 1; temp++) {
        arr2.push(str.substring(arr[temp], arr[temp + 1]));
      }

      
      //arr2=shuffle(arr2); //nt working
		let searchTerms=['#','{','.','{'],
        alphabet='abcdefghijklmnopqrstuvwxyz';

        for (let temp = 0; temp < arr2.length; temp++) {
        	for(let t=0;t<searchTerms.length;t+=2){
            	let x=getStringInBetween(arr2[temp],searchTerms[t],searchTerms[t+1]);
                if(x){
                	//arr3.push(x);
                	arr2[temp]=arr2[temp].replace(x, alphabet[0]);
                    document.getElementById('selectorRenaming').innerHTML+=
                    '<br><input type="checkbox" value="'+x+','+alphabet[0]+','+temp+'" onchange="selectorRenamingCheckbox(this);">'+x+'â†’ '+alphabet[0];
                    //from, to, index
                    alphabet=alphabet.replace(alphabet[0],"");          
                }
                
            }
        }
      //let t=getStringInBetween(arr2[9],'.','{');
      
      
      let selectorRenamingList=[];
      
      function selectorRenamingCheckbox(that){
      	let t=that.value.split(',');
      	if(that.checked){
        	selectorRenamingList.push(t);       
        }else{
        	selectorRenamingList.splice
        }
      }
      function selectorRenaming(){
      	
      }
      
      //console.log(arr3);
      

      document.getElementById("outputTextarea").value = arr2.join(' ');

    </script>
  </body>

</html>
